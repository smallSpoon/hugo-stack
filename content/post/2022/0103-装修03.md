---
title: "Hugo | 第三篇Stack主题装修记录，堂堂再临！"
date: 2022-01-03T22:12:30+08:00
lastmod: 2022-01-03T22:12:30+08:00
description: 是的我又来了，进行一些终身事业.JPG
tags:
  - Hugo
categories:
  - 麻瓜快速念咒互助小组
image: 
slug: stack-theme-furnish03

---

前两期装修记录参见：

1. [看中 Stack 主题的归档功能，搬家并做修改](https://mantyke.icu/2021/f9f0ec87/)

2. [另一篇 Stack 主题装修记录](https://mantyke.icu/2021/a08f1963/)

最近的主题修改攒攒又能写一篇了，之后的修改也都在这篇更新。

<br>

## 修改选中颜色

修改`/assets/scss/custom.scss`

```
//修改选中颜色
::selection {
    color: #fff;
    background: #34495e;
}
```

<br>

## 设置友情链接为双栏

前期工作参考：[修改友链样式](https://mantyke.icu/2021/a08f1963/#%E4%BF%AE%E6%94%B9%E5%8F%8B%E9%93%BE%E6%A0%B7%E5%BC%8F)

参考[将Hugo Stack主题友情链接改为双列显示](https://tech.randomwaves.space/posts/21-12-08-make-hugo-stack-theme-links-display-in-two-columns/)修改`/assets/scss/custom.scss`

```
//友情链接双栏
@media (min-width: 1024px) {
    .article-list--compact.links {
        display: grid;
        grid-template-columns: 1fr 1fr;
        background: none;
        box-shadow: none;
        
        article {
            background: var(--card-background);
            border: none;
            box-shadow: var(--shadow-l2);
            margin-bottom: 8px;
            border-radius: 10px;
            &:nth-child(odd) {
                margin-right: 8px;
            }
        }
    }
}
```

<br>

## 删掉waline的虚线

不知道哪天开始Waline突然更新了两条难看的虚线，我删掉了底虚线，侧虚线找了半天不知道怎么删_(:з」∠)_

修改`layouts\partials\comments\provider\waline.html`

```
   :root{
   	       --waline-border-color:transparent;
   	 }      
```

<br>

## 增加社交图标

这个其实是Stack主题本来有/后期更新的一个功能，记不清是之前觉得麻烦删了还是它后来才更新的，由于我的theme文件夹是采取本地下载的方式，不能直接拉取更新，所以是找到了它增加功能的那次[提交](https://github.com/CaiJimmy/hugo-theme-stack/commit/661e59b85d6761905da906018a26120a0b45ef5e)照着改的。

修改`assets/scss/partials/menu.scss`

```
.social-menu {
    list-style: none;
    padding: 0%;
    display: flex;
    flex-direction: row;
    gap: 10px;

    svg {
        width: 24px;
        height: 24px;
        stroke: var(--body-text-color);
        stroke-width: 1.33;
    }
}
```

修改`layouts/partials/sidebar/left.html`，在一头一尾两行中间加入

```
        <h2 class="site-description">{{ .Site.Params.sidebar.subtitle }}</h2> 

#加入以下内容

        {{- with .Site.Menus.social -}}
            <ol class="social-menu">
                {{ range . }}
                    <li>
                        <a 
                            href='{{ .URL | relLangURL }}'
                            {{ if eq (default true .Params.newTab) true }}target="_blank"{{ end }}
                            {{ with .Name }}title="{{ . }}"{{ end }}
                        >
                            {{ $icon := default "link" .Params.Icon }}
                            {{ with $icon }}
                                {{ partial "helper/icon" . }}
                            {{ end }}
                        </a>
                    </li>
                {{ end }}
            </ol>
        {{- end -}}
        
#到这里结束
    </header>
```

之后在config.yaml中加入以下段落，图标文件放置在`assets/icons`，svg格式

```
menu:
    main:
    social:
        - identifier: 小球飞槎
          name: 小球飞槎
          weight: 4
          url: https://ink.mantyke.icu
          params:
          	icon: feicha
```

<br>

## 下点小雪人

圣诞节前在[Mengru的空间](https://mengru.space/)看到的[下雪小脚本](https://mengru.space/?posts/2021/12/%E5%97%96%E5%BE%97%E4%B8%80%E4%B8%8B11%E6%9C%88#%E5%8D%9A%E5%AE%A2%E4%B8%8B%E9%9B%AA%E7%9A%84%E5%B0%8F%E8%84%9A%E6%9C%AC)，挺有意思的，本来想圣诞下两天雪，后来忙来忙去，今天才想起来加上

因为除了雪之外还想下点别的，所以把JS文件下载下来改改配置，在`static/js`里新建一个`snow.js`，复制以下内容：

```
;(function () {
    const Config = {
       snow: ['❄', '', '※', '⛄', '☃', '🎄', ], // 雪花的样式，可以放不同的雪花，或者任何 emoji，每次生成新雪花时会随机挑选其中一个
        color: '#d9e2e7', // 雪的颜色
        speed: 10, // 雪花从生成到落到最底端所经历的时间，单位是秒。数字越小落得越快
        dom: document.getElementsByTagName('body')[0], // 下雪的区域，可以保持不变，这样就是全屏下雪
        interval: 800 // 生成一片雪花的时间间隔，单位是毫秒
    }
    if (!Config.dom) {
        throw Error('错误提示')
    }
    const $canvas = document.createElement('div')

    useStyle($canvas, {
        width: '100%',
        height: '100%',
        position: 'fixed',
        top: 0,
        left: 0,
        pointerEvents: 'none',
        zIndex: 100
    })

    setInterval(() => {
        const $snow = document.createElement('div')
        $snow.innerText = Config.snow[rand(0, Config.snow.length - 1)]
        useStyle($snow, {
            display: 'inline-block',
            color: Config.color,
            fontSize: rand(14, 25) + 'px',
            position: 'absolute',
            top: 0,
            left: rand(0, 100) + '%',
            transition: 'transform ' + Config.speed + 's linear' + ',opacity ' + Config.speed + 's linear',
            transform: 'translateY(-100%)',
            opacity: Math.random() + 0.3
        })
        setTimeout(() => {
            useStyle($snow, {
                transform: 'translate(0, ' + getComputedStyle($canvas).height + ') rotate(480deg)',
                opacity: 0
            })
            $snow.addEventListener('transitionend', () => {
                $snow.remove()
            })
        }, 100)
        $canvas.appendChild($snow)
    }, Config.interval)

    function rand (from, to) {
        return from + Math.floor(Math.random() * (to - from + 1))
    }
    function useStyle (dom, style) {
        for (let sKey in style) {
            dom.style[sKey] = style[sKey]
        }
    }

    Config.dom.appendChild($canvas)
})()
```

之后在`/layouts/partials/footer/custom.html`中加入

```
<script src="/js/snow.js"></script>
```

……说起来，这个是不是好久前博客大巴年代玩儿的？搜了一下，发现2017年8月博客大巴因不可抗力停运了。

<br>
