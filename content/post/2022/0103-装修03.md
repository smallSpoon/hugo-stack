---
title: "Hugo | ç¬¬ä¸‰ç¯‡Stackä¸»é¢˜è£…ä¿®è®°å½•ï¼Œå ‚å ‚å†ä¸´ï¼"
date: 2022-01-03T22:12:30+08:00
lastmod: 2022-01-03T22:12:30+08:00
description: æ˜¯çš„æˆ‘åˆæ¥äº†ï¼Œè¿›è¡Œä¸€äº›ç»ˆèº«äº‹ä¸š.JPG
tags:
  - Hugo
categories:
  - éº»ç“œå¿«é€Ÿå¿µå’’äº’åŠ©å°ç»„
image: 
slug: stack-theme-furnish03

---

å‰ä¸¤æœŸè£…ä¿®è®°å½•å‚è§ï¼š

1. [çœ‹ä¸­ Stack ä¸»é¢˜çš„å½’æ¡£åŠŸèƒ½ï¼Œæ¬å®¶å¹¶åšä¿®æ”¹](https://mantyke.icu/2021/f9f0ec87/)

2. [å¦ä¸€ç¯‡ Stack ä¸»é¢˜è£…ä¿®è®°å½•](https://mantyke.icu/2021/a08f1963/)

æœ€è¿‘çš„ä¸»é¢˜ä¿®æ”¹æ”’æ”’åˆèƒ½å†™ä¸€ç¯‡äº†ï¼Œä¹‹åçš„ä¿®æ”¹ä¹Ÿéƒ½åœ¨è¿™ç¯‡æ›´æ–°ã€‚

{{< quote >}}

{{< emoji name="artist"  ext="png" width="35" >}} æœ¬æ–‡ä½œè€…æ²¡æœ‰ä»»ä½•ä»£ç åŸºç¡€ï¼Œæ‰€æœ‰è¯´æ˜æ€§æ–‡å­—ä¸»è¦é è¿è’™å¸¦çŒœå…¼çµå…‰ä¸€ç°ï¼Œå‚è€ƒæ—¶è¯·åŠ¡å¿…æ³¨æ„ï¼Œæ¬¢è¿æå‡ºæ„è§å’Œç»™å‡ºå»ºè®®~

{{< /quote >}}

<br>

## ä¿®æ”¹é€‰ä¸­é¢œè‰²

ä¿®æ”¹`/assets/scss/custom.scss`

```
//ä¿®æ”¹é€‰ä¸­é¢œè‰²
::selection {
    color: #fff;
    background: #34495e;
}
```

<br>

## è®¾ç½®å‹æƒ…é“¾æ¥ä¸ºåŒæ 

å‰æœŸå·¥ä½œå‚è€ƒï¼š[ä¿®æ”¹å‹é“¾æ ·å¼](https://mantyke.icu/2021/a08f1963/#%E4%BF%AE%E6%94%B9%E5%8F%8B%E9%93%BE%E6%A0%B7%E5%BC%8F)

å‚è€ƒ[å°†Hugo Stackä¸»é¢˜å‹æƒ…é“¾æ¥æ”¹ä¸ºåŒåˆ—æ˜¾ç¤º](https://tech.randomwaves.space/posts/21-12-08-make-hugo-stack-theme-links-display-in-two-columns/)ä¿®æ”¹`/assets/scss/custom.scss`

```
//å‹æƒ…é“¾æ¥åŒæ 
@media (min-width: 1024px) {
    .article-list--compact.links {
        display: grid;
        grid-template-columns: 1fr 1fr;
        background: none;
        box-shadow: none;
        
        article {
            background: var(--card-background);
            border: none;
            box-shadow: var(--shadow-l2);
            margin-bottom: 8px;
            border-radius: 10px;
            &:nth-child(odd) {
                margin-right: 8px;
            }
        }
    }
}
```

<br>

## åˆ æ‰walineçš„è™šçº¿

ä¸çŸ¥é“å“ªå¤©å¼€å§‹Walineçªç„¶æ›´æ–°äº†ä¸¤æ¡éš¾çœ‹çš„è™šçº¿ï¼Œæˆ‘åˆ æ‰äº†åº•è™šçº¿ï¼Œä¾§è™šçº¿æ‰¾äº†åŠå¤©ä¸çŸ¥é“æ€ä¹ˆåˆ _(:Ğ·ã€âˆ )_

ä¿®æ”¹`layouts\partials\comments\provider\waline.html`

```
   :root{
   	       --waline-border-color:transparent;
   	 }      
```

<br>

## å¢åŠ ç¤¾äº¤å›¾æ ‡

è¿™ä¸ªå…¶å®æ˜¯Stackä¸»é¢˜æœ¬æ¥æœ‰/åæœŸæ›´æ–°çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œè®°ä¸æ¸…æ˜¯ä¹‹å‰è§‰å¾—éº»çƒ¦åˆ äº†è¿˜æ˜¯å®ƒåæ¥æ‰æ›´æ–°çš„ï¼Œç”±äºæˆ‘çš„themeæ–‡ä»¶å¤¹æ˜¯é‡‡å–æœ¬åœ°ä¸‹è½½çš„æ–¹å¼ï¼Œä¸èƒ½ç›´æ¥æ‹‰å–æ›´æ–°ï¼Œæ‰€ä»¥æ˜¯æ‰¾åˆ°äº†å®ƒå¢åŠ åŠŸèƒ½çš„é‚£æ¬¡[æäº¤](https://github.com/CaiJimmy/hugo-theme-stack/commit/661e59b85d6761905da906018a26120a0b45ef5e)ç…§ç€æ”¹çš„ã€‚

ä¿®æ”¹`assets/scss/partials/menu.scss`

```
.social-menu {
    list-style: none;
    padding: 0%;
    display: flex;
    flex-direction: row;
    gap: 10px;
    justify-content: center; #è®¾ç½®å±…ä¸­

    svg {
        width: 24px;
        height: 24px;
        stroke: var(--body-text-color);
        stroke-width: 1.33;
    }
}
```

ä¿®æ”¹`layouts/partials/sidebar/left.html`ï¼Œåœ¨ä¸€å¤´ä¸€å°¾ä¸¤è¡Œä¸­é—´åŠ å…¥

```
        <h2 class="site-description">{{ .Site.Params.sidebar.subtitle }}</h2> 

#åŠ å…¥ä»¥ä¸‹å†…å®¹

        {{- with .Site.Menus.social -}}
            <ol class="social-menu">
                {{ range . }}
                    <li>
                        <a 
                            href='{{ .URL | relLangURL }}'
                            {{ if eq (default true .Params.newTab) true }}target="_blank"{{ end }}
                            {{ with .Name }}title="{{ . }}"{{ end }}
                        >
                            {{ $icon := default "link" .Params.Icon }}
                            {{ with $icon }}
                                {{ partial "helper/icon" . }}
                            {{ end }}
                        </a>
                    </li>
                {{ end }}
            </ol>
        {{- end -}}
        
#åˆ°è¿™é‡Œç»“æŸ
    </header>
```

ä¹‹ååœ¨config.yamlä¸­åŠ å…¥ä»¥ä¸‹æ®µè½ï¼Œå›¾æ ‡æ–‡ä»¶æ”¾ç½®åœ¨`assets/icons`ï¼Œsvgæ ¼å¼

```
menu:
    main:
    social:
        - identifier: å°çƒé£æ§
          name: å°çƒé£æ§
          weight: 4
          url: https://ink.mantyke.icu
          params:
          	icon: feicha
```

<br>

## ä¸‹ç‚¹å°é›ªäºº

åœ£è¯èŠ‚å‰åœ¨[Mengruçš„ç©ºé—´](https://mengru.space/)çœ‹åˆ°çš„[ä¸‹é›ªå°è„šæœ¬](https://mengru.space/?posts/2021/12/%E5%97%96%E5%BE%97%E4%B8%80%E4%B8%8B11%E6%9C%88#%E5%8D%9A%E5%AE%A2%E4%B8%8B%E9%9B%AA%E7%9A%84%E5%B0%8F%E8%84%9A%E6%9C%AC)ï¼ŒæŒºæœ‰æ„æ€çš„ï¼Œæœ¬æ¥æƒ³åœ£è¯ä¸‹ä¸¤å¤©é›ªï¼Œåæ¥å¿™æ¥å¿™å»ï¼Œä»Šå¤©æ‰æƒ³èµ·æ¥åŠ ä¸Š

å› ä¸ºé™¤äº†é›ªä¹‹å¤–è¿˜æƒ³ä¸‹ç‚¹åˆ«çš„ï¼Œæ‰€ä»¥æŠŠJSæ–‡ä»¶ä¸‹è½½ä¸‹æ¥æ”¹æ”¹é…ç½®ï¼Œåœ¨`static/js`é‡Œæ–°å»ºä¸€ä¸ª`snow.js`ï¼Œå¤åˆ¶ä»¥ä¸‹å†…å®¹ï¼š

```
;(function () {
    const Config = {
       snow: ['â„', '', 'â€»', 'â›„', 'â˜ƒ', 'ğŸ„', ], // é›ªèŠ±çš„æ ·å¼ï¼Œå¯ä»¥æ”¾ä¸åŒçš„é›ªèŠ±ï¼Œæˆ–è€…ä»»ä½• emojiï¼Œæ¯æ¬¡ç”Ÿæˆæ–°é›ªèŠ±æ—¶ä¼šéšæœºæŒ‘é€‰å…¶ä¸­ä¸€ä¸ª
        color: '#d9e2e7', // é›ªçš„é¢œè‰²
        speed: 10, // é›ªèŠ±ä»ç”Ÿæˆåˆ°è½åˆ°æœ€åº•ç«¯æ‰€ç»å†çš„æ—¶é—´ï¼Œå•ä½æ˜¯ç§’ã€‚æ•°å­—è¶Šå°è½å¾—è¶Šå¿«
        dom: document.getElementsByTagName('body')[0], // ä¸‹é›ªçš„åŒºåŸŸï¼Œå¯ä»¥ä¿æŒä¸å˜ï¼Œè¿™æ ·å°±æ˜¯å…¨å±ä¸‹é›ª
        interval: 800 // ç”Ÿæˆä¸€ç‰‡é›ªèŠ±çš„æ—¶é—´é—´éš”ï¼Œå•ä½æ˜¯æ¯«ç§’
    }
    if (!Config.dom) {
        throw Error('é”™è¯¯æç¤º')
    }
    const $canvas = document.createElement('div')

    useStyle($canvas, {
        width: '100%',
        height: '100%',
        position: 'fixed',
        top: 0,
        left: 0,
        pointerEvents: 'none',
        zIndex: 100
    })

    setInterval(() => {
        const $snow = document.createElement('div')
        $snow.innerText = Config.snow[rand(0, Config.snow.length - 1)]
        useStyle($snow, {
            display: 'inline-block',
            color: Config.color,
            fontSize: rand(14, 25) + 'px',
            position: 'absolute',
            top: 0,
            left: rand(0, 100) + '%',
            transition: 'transform ' + Config.speed + 's linear' + ',opacity ' + Config.speed + 's linear',
            transform: 'translateY(-100%)',
            opacity: Math.random() + 0.3
        })
        setTimeout(() => {
            useStyle($snow, {
                transform: 'translate(0, ' + getComputedStyle($canvas).height + ') rotate(480deg)',
                opacity: 0
            })
            $snow.addEventListener('transitionend', () => {
                $snow.remove()
            })
        }, 100)
        $canvas.appendChild($snow)
    }, Config.interval)

    function rand (from, to) {
        return from + Math.floor(Math.random() * (to - from + 1))
    }
    function useStyle (dom, style) {
        for (let sKey in style) {
            dom.style[sKey] = style[sKey]
        }
    }

    Config.dom.appendChild($canvas)
})()
```

ä¹‹ååœ¨`/layouts/partials/footer/custom.html`ä¸­åŠ å…¥

```
<script src="/js/snow.js"></script>
```

â€¦â€¦è¯´èµ·æ¥ï¼Œè¿™ä¸ªæ˜¯ä¸æ˜¯å¥½ä¹…å‰åšå®¢å¤§å·´å¹´ä»£ç©å„¿çš„ï¼Ÿæœäº†ä¸€ä¸‹ï¼Œå‘ç°2017å¹´8æœˆåšå®¢å¤§å·´å› ä¸å¯æŠ—åŠ›åœè¿äº†ã€‚

<br>

## å‡çº§æœ¬ç«™æ€»å­—æ•°æ˜¾ç¤º

ç«™ç‚¹æ€»å­—æ•°è¶…è¿‡åä¸‡äº†ï¼ŒåŸæœ¬çš„å­—æ•°æ˜¾ç¤ºæ–¹å¼æ˜¾å¾—ä¸å¤ªæ•´æ´ï¼Œéœ€è¦è°ƒæ•´æ–°çš„æ˜¾ç¤ºæ–¹å¼ï¼Œä»æ˜¾ç¤ºâ€œå…±å˜Ÿå˜Ÿäº† 125126 å­—â€ï¼Œæ”¹ä¸ºæ˜¾ç¤ºâ€œå…±å˜Ÿå˜Ÿäº†12.5kå­—â€

æ„Ÿè°¢å—ç‹å’Œæ²‰ç›®çš„å¥½å¿ƒå¸®åŠ©ï¼Œ ç¡å‰åœ¨è±¡ä¸Šå˜Ÿå˜ŸListäº†ä¸€ä¸‹ï¼ŒèŠç€èŠç€ç«Ÿç„¶æ”¶è·äº†ä¸€ä»½ä½œä¸šå¯ä»¥æŠ„ï¼

é¦–å…ˆæ¥çœ‹ä¹‹å‰çš„å­—æ•°æ˜¾ç¤ºä»£ç ï¼Œä¸¤æ®µä»£ç éƒ½å†™åœ¨`layouts\partials\footer\footer.html`ä¸­

```
{{$scratch := newScratch}}
{{ range (where .Site.Pages "Kind" "page" )}} 
    {{$scratch.Add "total" .WordCount}}
{{ end }}
```

æ ¹æ®Hugoçš„æ–‡æ¡£ï¼Œ[.Scratch](https://gohugo.io/functions/scratch/)å¯ä»¥ç”¨æ¥å¤„ç†æ•°æ®ï¼Œ`scratch.Add`ç”¨æ¥å°†ç»™å®šå€¼æ·»åŠ åˆ°æŒ‡å®šé”®çš„ç°æœ‰å€¼ï¼Œå¹¶ä¸”å¯ä»¥ç´¯è®¡ï¼Œ[.WordCount](https://gohugo.io/variables/page/#page-variables)æ˜¯Hugoæä¾›çš„å­—æ•°ç»Ÿè®¡å˜é‡ï¼Œè¿™ä¸€æ®µä»£ç çš„æ„æ€æ˜¯ï¼Œå¾ªç¯éå†ç«™ç‚¹çš„æ‰€æœ‰ç±»å‹ä¸º`page`çš„é¡µé¢ï¼Œå°†æ•°å€¼æ·»åŠ åˆ°`total`å½“ä¸­ã€‚

```
å…±å˜Ÿå˜Ÿäº† {{$scratch.Get "total" }}å­—
```

`scratch.Set`ç”¨æ¥è·å–`total`çš„å€¼ï¼Œè¿™æ ·å°±å®Œæˆäº†ç«™ç‚¹æ€»å­—æ•°çš„ç»Ÿè®¡ã€‚

æ‰€ä»¥ï¼Œæˆ‘ä»¬æœ‰ä¸‰ç§è¾¾åˆ°ç›®çš„çš„åŠæ³•ï¼Œå‡è®¾æ€»å­—æ•°ä¸º 125126å­—ã€‚

1. æ ¹æ®[æ–‡æ¡£](https://gohugo.io/functions/math/#readout)ï¼Œç®€å•ä¿®æ”¹é¡µå°¾ï¼Œä¿®æ”¹ä¸º`{{div ($scratch.Get "total") 1000}}`ï¼ˆä¸æ˜¾ç¤ºå°æ•°ï¼‰æˆ–è€…`{{div ($scratch.Get "total") 1000.0}}`ï¼ˆæ˜¾ç¤ºå°æ•°ï¼‰ï¼ŒåŠ ä¸€ä¸ª`k`ã€‚æœ€ç»ˆä¼šæ˜¾ç¤º125kå­—æˆ–è€…125.126kå­—ã€‚

2. 125.126kå­—å¾ˆéš¾çœ‹ï¼Œ125kå¥½åƒåˆæœ‰ç‚¹ä¸å¤Ÿæ´»æ³¼ï¼ŒæŠ˜ä¸­ä¸€ä¸‹ï¼Œå¯ä»¥ä½¿ç”¨Hugoçš„`.FuzzyWordCount`å‚æ•°ï¼Œæ¨¡ç³Šç»Ÿè®¡æ¯ç¯‡æ–‡ç« çš„å­—æ•°ï¼ˆè¶…è¿‡ä¸€ç™¾çš„å‘ä¸Šå–æ•´ï¼‰ï¼Œé…åˆ`{{div ($scratch.Get "total") 1000.0}}`ï¼Œå°±ä¼šæ˜¾ç¤ºå¸¦ä¸€ä½å°æ•°çš„æ€»å­—æ•°ã€‚ç¼ºç‚¹åœ¨äºï¼Œæ¨¡ç³Šç»Ÿè®¡å­—æ•°ä¼šéšç€æ–‡ç« ç¯‡æ•°å¢åŠ è€Œè¶Šæ¥è¶Šä¸å‡†ç¡®ï¼Œä¸æ˜¯ä¸ªå¾ˆå¥½çš„å¤„ç†åŠæ³•ã€‚

3. æŒ‰ç…§è±¡å‹å—ç‹ç»™å‡ºçš„å‡½æ•°ï¼Œå¯¹æ•°å€¼è¿›è¡Œä¸€äº›è®¡ç®—

   ```
   {{$var :=  $scratch.Get "total"}} #å°†totalçš„å€¼ç»™äºˆvar
   {{$var = div $var 100.0}} #å°†varçš„å€¼é™¤ä»¥100
   {{$var = math.Ceil $var}} #æ•°å€¼å‘ä¸‹å–æ•´
   {{$var = div $var 10.0}} #å†é™¤ä»¥10ï¼Œè·å¾—å¸¦ä¸€ä½å°æ•°ç‚¹çš„æ•°å­—
   ```

   ```
   å…±å˜Ÿå˜Ÿäº† {{$scratch.Get "var" }}å­—
   ```

   æœ€ç»ˆæ˜¾ç¤ºæ•ˆæœä¸ºï¼šå…±å˜Ÿå˜Ÿäº†125.1kå­—ï¼Œå®Œç¾ï¼

å®Œæ•´ä»£ç å¦‚ä¸‹ï¼ˆåœ¨åŸæœ¬å­—æ•°ç»Ÿè®¡ä»£ç çš„åŸºç¡€ä¸Šä¿®æ”¹ï¼‰ï¼š

```
{{$var :=  $scratch.Get "total"}}{{$var = div $var 100.0}}{{$var = math.Ceil $var}}{{$var = div $var 10.0}}å…±å˜Ÿå˜Ÿäº†{{$var}}kå­—
```

<br>

**è¡¥å……ï¼š** Zeroè¡¥å……è¯´[æ–‡æ¡£](https://gohugo.io/functions/lang/#langformatnumber)ä¸­è¿˜æœ‰ä¸€ä¸ªæ›´ç®€å•çš„æ–¹å¼æ¥ä¿ç•™å°æ•°ç‚¹ã€‚

> å®ƒä¹‹æ‰€ä»¥æŠŠè¿™ä¸ªåŠŸèƒ½æ”¾åˆ° lang ä¸‹é¢ï¼Œæ˜¯å› ä¸ºæ¯”å¦‚è¯´ä¸­æ³•åŒè¯­çš„åšå®¢ï¼Œåˆ‡æ¢åˆ°æ³•è¯­åå°æ•°ç‚¹è‡ªåŠ¨æ”¹æˆé€—å·ï¼š123.45 â†’ 123,45

```
å…±å˜Ÿå˜Ÿäº†{{ div ($scratch.Get "total") 1000.0 | lang.FormatNumber 2 }}kå­—.
```

<br>

##
