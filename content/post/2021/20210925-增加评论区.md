---
title: Hugo | 为Blog增加Valine评论区
date: 2021-09-25T19:12:55+08:00
description: 虽然都说Valine是防君子不防小人，但是这个改过的样式真的很好看
toc: true
tags:
  - Hugo
categories:
  - 麻瓜快速念咒互助小组
hidden: false
draft: false
slug: ca2e5cb6
---



一直蛮犹豫加不加Blog评论区的，但看到[Hugo Stack主題添加Valine支援](https://www.bigs3.com/article/hugo-theme-stack-valine/)修改的样式，好好看哦。那来都来了，加一个试试。

## 安装Valine 

说动手就动手，先读一遍[Valine中文文档](https://valine.js.org/quickstart.html)，掏出我一年多没用过的LeanCloud，创建应用，拿到`APP ID`和`APP Key`，在`layouts/partials/comments/provider/valine.html`中写入上面上文作者给的代码，最后在config.yaml中进行配置。配置内容如下：

```
        valine:
            enable: true 
            appId: 
            appKey: 
            avatar: '' //头像
            placeholder: 
            visitor: true //文章访问量统计
```

……理论上是这样的。



实际上呢，我发现，不管我怎么改`avatar`的值，头像都会坚持显示`identicon`这个很丑的抽象几何图形。

改了七八遍之后终于觉得不对了，怀疑是作者直接把配置写进了html，搜索后发现确实如此，修改`layouts/partials/comments/provider/valine.html`

```
    valine.init({
        el: '#vcomments',
        appId: '',  //這裏填入你的appId
        appKey: '', //這裏填入你的appKey
        avatar: 'robohash',//头像默认显示随机小机器人
        placeholder: placeholder, //评论区占位提示符
        enableQQ: true,//填入QQ邮箱自动拉取QQ头像和昵称
        lang:'zh-CN', //多语言支持
        requiredFields: ['nick'], //设置必填项
        recordIP: false, //是否记录评论者IP
        visitor: true //文章阅读量统计
    })
```

## 修改一些样式

以下修改都是在`valine.html`中实现

### 评论回复按钮颜色

默认的评论回复按钮是完全看不到的白色，改成灰色让它能够被观测到。

```
    #vcomments .vmeta .vat {
        background: 0 0;
        cursor: pointer;
        border: 0;
        border-radius: 10px; //调一下圆角为10px
        text-transform: uppercase;
        color: DarkGray; //颜色为深灰色
```

### 回复框修改

```
    #vcomments .vwrap {
        background-color: var(--card-background);
        border: 0px solid #f0f0f0;
        border-radius: 10px; //圆角修改为10px
        margin-bottom: 10px;
        overflow: hidden;
        position: relative;
        padding: 0px 0px 0px 0px;
        font-family: inherit;
        display: flex;
        flex-direction: column;
        box-shadow: var(--shadow-l2); //增加卡片阴影
    }
```

### 评论卡片参数修改

```
    #vcomments .vcards .vcard {
        background-color: var(--card-background);
	    padding: 25px 25px 5px 25px;
	    border-radius: 10px; //圆角修改为10px
	    margin-bottom: 15px;
	    transition: all .3s
	    box-shadow: var(--shadow-l2); //增加卡片阴影
```

